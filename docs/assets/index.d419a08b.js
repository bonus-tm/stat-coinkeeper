var Me=Object.defineProperty;var me=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var ge=(a,e,o)=>e in a?Me(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,ae=(a,e)=>{for(var o in e||(e={}))Re.call(e,o)&&ge(a,o,e[o]);if(me)for(var o of me(e))Le.call(e,o)&&ge(a,o,e[o]);return a};import{r as R,a as oe,l as z,w as ze,t as se,b as q,i as Oe,c as Ne,f as B,e as Ue,d as Te,g as Be,h as Fe,j as je,k as Ye,m as D,o as p,n as f,F as _,p as S,q as c,s as J,u as U,v as X,x as W,y as v,z as Y,A as $,B as Pe,C as qe,D as F,E as b,G as re,H as Ke,I as Je,J as we,L as he,K as We,M as Ge,N as Xe,O as Ze,P as Qe,Q as et,R as tt,S as at,T as ot,U as rt,V as nt,W as lt,X as st,Y as it,Z as ct,_ as dt,$ as ut,a0 as pt,a1 as ht}from"./vendor.f437c346.js";const ft=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}};ft();const ye="sck-config",ne="sck-data";var h={palette:["#cccccc","#ff3b30","#ff9500","#ffcc00","#34c759","#5ac8fa","#007aff","#5856d6","#af52de","#000000"],dragging:R(!1),_defaultState:{baseCurrency:"RUB",heaps:{accounts:[{type:"accounts",title:"\u0411\u0435\u0437\u043D\u0430\u043B",color:{bg:"#007aff",border:"#007aff"},coins:[]},{type:"accounts",title:"\u041D\u0430\u043B\u0438\u0447\u043A\u0430",color:{bg:"#5ac8fa",border:"#5ac8fa"},coins:[]},{type:"accounts",title:"\u0412\u0430\u043B\u044E\u0442\u0430",color:{bg:"#34c759",border:"#34c759"},coins:[]}],allIncomesVsExpenses:[{type:"operations",title:"\u0412\u0441\u0435 \u0434\u043E\u0445\u043E\u0434\u044B",color:{bg:"#0491d1",border:"#0491d1"},coins:[]},{type:"operations",title:"\u0412\u0441\u0435 \u0440\u0430\u0441\u0445\u043E\u0434\u044B",color:{bg:"#e53935",border:"#e53935"},coins:[]}],incomes:[{type:"operations",title:"\u041F\u0435\u0440\u0432\u0430\u044F \u043A\u0443\u0447\u0430 \u0434\u043E\u0445\u043E\u0434\u043E\u0432",color:{bg:"#0491d1",border:"#0491d1"},coins:[]},{type:"operations",title:"\u0412\u0442\u043E\u0440\u0430\u044F \u043A\u0443\u0447\u0430 \u0434\u043E\u0445\u043E\u0434\u043E\u0432",color:{bg:"#ffcc00",border:"#ffcc00"},coins:[]}],expenses:[{type:"operations",title:"\u041F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u044B\u0435 \u0440\u0430\u0441\u0445\u043E\u0434\u044B",color:{bg:"#e53935",border:"#e53935"},coins:[]},{type:"operations",title:"\u0420\u0435\u0434\u043A\u0438\u0435",color:{bg:"#ff9500",border:"#ff9500"},coins:[]}]}},state:oe({}),readonly:{},hasData:R(!1),async init(){console.log("init");let a;try{a=await z.getItem(ye),console.log("initial",a)}catch(e){console.log({e})}a?this.state=oe(ae({},a)):this.state=oe(ae({},this._defaultState)),ze(()=>this.state,async e=>{console.log("state change observed",e),await z.setItem(ye,se(e))},{deep:!0});try{this.readonly=await z.getItem(ne),this.readonly?this.hasData.value=!0:this.readonly={},console.log("initial readonly user data",this.hasData.value,this.readonly)}catch(e){console.log({e})}},async setReadonly({timestamp:a,data:e}){var o,t,n,l,r,s,d,i;this.readonly.timestamp=a,this.readonly.operations=e.operations,this.readonly.incomes=e.incomes,this.readonly.accounts=e.accounts,this.readonly.expenses=e.expenses,this.readonly.tags=e.tags,this.updateCoins([...e.accounts,...e.incomes,...e.expenses]),((l=(n=(t=(o=this.state.heaps)==null?void 0:o.allIncomesVsExpenses)==null?void 0:t[0])==null?void 0:n.coins)==null?void 0:l.length)===0&&((i=(d=(s=(r=this.state.heaps)==null?void 0:r.allIncomesVsExpenses)==null?void 0:s[1])==null?void 0:d.coins)==null?void 0:i.length)===0&&this.fillDefaultHeaps(e.incomes,e.expenses),await z.setItem(ne,this.readonly),this.hasData.value=!0},updateCoins(a){for(let e of Object.keys(this.state.heaps))this.state.heaps[e].forEach(o=>{o.coins||(o.coins=[]),o.coins.forEach((t,n)=>{o.coins[n]=a.find(l=>l.type===t.type&&l.id===t.id)})})},fillDefaultHeaps(a,e){this.state.heaps.allIncomesVsExpenses[0].coins=[...a],this.state.heaps.allIncomesVsExpenses[1].coins=[...e]},async clearReadonly(){this.readonly.timestamp=null,this.readonly.operations=null,this.readonly.incomes=null,this.readonly.accounts=null,this.readonly.expenses=null,this.readonly.tags=null,await z.removeItem(ne),this.hasData.value=!1}},_e=async(a,e={})=>{let o=Object.entries(e).map(([t,n])=>Array.isArray(n)?`${t}=${n.join(",")}`:`${t}=${n}`).join("&");try{return(await fetch(`${a}?${o}`)).json()}catch(t){return{success:!1,error:t}}};const ve="currencies",be="https://api.exchangerate.host",mt=new Date(2019,0,1),le="yyyy-MM-dd",Ce="yyyy-MM";var j={_base:"",_currencies:{},loaded:!1,async init(a="RUB",e=["USD","EUR"]){var n,l,r;await this._restore(),this._base!==a&&(this._base=a,q.exports.merge(this._currencies,await this._loadLatest(a,e),await this._loadHistory(a,e)));let o=Object.keys(this._currencies),t=e.filter(s=>!o.includes(s));t.length&&q.exports.merge(this._currencies,await this._loadLatest(a,t),await this._loadHistory(a,t));for(let[s,{updatedAt:d,history:i={}}]of Object.entries(this._currencies)){Oe(new Date(d))||q.exports.merge(this._currencies,await this._loadLatest(a,[s]));let u=new Date(Object.keys(i).sort().reverse()[0]);Ne(u)||q.exports.merge(this._currencies,await this._loadHistory(a,[s],u)),(r=(n=this._currencies[s].history)[l=B(new Date,Ce)])!=null||(n[l]=this._currencies[s].latest)}console.log("currencies init",this._currencies),await this._save(),this.loaded=!0},rate(a,e){var o;return e?(o=this._currencies[a])==null?void 0:o.history[e]:this._currencies[a].latest},_save(){return z.setItem(ve,{base:this._base,currencies:this._currencies})},async _restore(){let{base:a="",currencies:e={}}=await z.getItem(ve)||{};this._base=a,this._currencies=e},async _loadLatest(a,e){let o={},t=await _e(be+"/latest",{base:a,symbols:e});return t.success?e.filter(n=>t.rates[n]).forEach(n=>{o[n]={latest:t.rates[n],updatedAt:Date.now()}}):console.warn("load latest problem:",t),o},async _loadHistory(a,e,o=mt){let t={};for(let l of e)t[l]={history:{}};let n=new Date;for(let l of Ue({start:o,end:n})){let r=l,s=Te(l)?n:Be(l),d=await _e(be+"/timeseries",{base:a,symbols:e,start_date:B(r,le),end_date:B(s,le)});if(!d.success)console.warn("load history problem:",d);else{let i=Fe({start:r,end:s});for(let u of i){let x=d.rates[B(je(u),le)]||{};for(let E of e)t[E].history[B(u,Ce)]=x[E]}}}return t}};const L=10**3,M=10**6,A=a=>{if(isNaN(a))return"";let e=a<0?"\u2013":"",o=Math.abs(a),t="";return o>=M*10?o=(Math.round(o*100/M)/100).toString():o>=M?o=(Math.round(o*1e3/M)/1e3).toString():o>=100*L?o=Math.round(o/L).toString():o>=L?o=(Math.round(o*10/L)/10).toString():o=o.toString(),`${e}${o.replace(".",",")}${t}`},gt=(a,e=" ")=>{if(isNaN(a))return"";let o=a<0?"\u2013":"",t=Math.abs(a),n="",l="",r="";return t>=M&&(n=Math.floor(t/M)),t>=L&&(l=Math.floor((t-n*M)/L)),t>=M&&(l=l.toString().padStart(3,"0")),r=t-n*M-l*L,t>=L&&(r=r.toString().padStart(3,"0")),`${o}${n}${n?e:""}${l}${l?e:""}${r}`},T=(a,e=1)=>{if(!a)return`rgba(128,128,128,${e})`;let[,o,t,n,l,r,s]=a.split(""),d=parseInt(`${o}${t}`,16),i=parseInt(`${n}${l}`,16),u=parseInt(`${r}${s}`,16);return`rgba(${d},${i},${u},${e})`};var V=(a,e)=>{const o=a.__vccOpts||a;for(const[t,n]of e)o[t]=n;return o};const yt={name:"ChartPie",props:{data:{type:Array,required:!0},fieldColor:{type:String,default:"color"},fieldTitle:{type:String,default:"title"},fieldValue:{type:String,default:"value"}},setup(a){let{data:e,fieldColor:o,fieldTitle:t,fieldValue:n}=Ye(a),l=D(()=>e.value.reduce((d,i)=>(d+=i[n.value],d),0));const r=(d,i=0)=>Number.isNaN(d)?0:Math.round(d*10**i)/10**i;let s=D(()=>{let d=0;return e.value.sort((i,u)=>u.value-i.value).map(i=>{let u=r(100*i[n.value]/l.value,2),x={offset:d,percent:u,value:i[n.value],title:i[t.value],color:i[o.value]};return d+=x.percent,d===100&&u>0&&(x.percent+=1),x})});return{palette:h.palette,totalValue:l,sectors:s,round:r,format:gt}}},_t={class:"pie-container"},vt={viewBox:"0 0 64 64",class:"pie"},bt=["stroke","stroke-dasharray","stroke-dashoffset"],Ct={class:"pie-legend"},kt={class:"pie-legend-value"},Dt={class:"pie-legend-value"},xt=c("span",{style:{"margin-left":"1.5px"}},"\u20BD",-1);function wt(a,e,o,t,n,l){return p(),f("div",_t,[(p(),f("svg",vt,[(p(!0),f(_,null,S(t.sectors,(r,s)=>(p(),f("circle",{key:`circle-${s}`,r:"25%",cx:"50%",cy:"50%",stroke:r.color,"stroke-dasharray":`${t.round(r.percent,2)} 100`,"stroke-dashoffset":`${-t.round(r.offset,2)}`},null,8,bt))),128))])),c("div",Ct,[(p(!0),f(_,null,S(t.sectors,(r,s)=>(p(),f(_,{key:`legend-${s}`},[c("div",{style:J({backgroundColor:r.color}),class:"pie-legend-color"},null,4),c("div",null,U(r.title),1),c("div",kt,U(t.round(100*r.value/t.totalValue,1))+"% ",1),c("div",Dt,[X(U(t.format(t.round(r.value,0))),1),xt])],64))),128))])])}var $t=V(yt,[["render",wt]]);const It={name:"Coin",props:{coin:{type:Object,required:!0}},methods:{onDragStart(a){h.dragging.value=!0,a.dataTransfer.setData("text",JSON.stringify(this.coin))},onDragEnd(){h.dragging.value=!1}}},At={class:"ck-coin__icon-wrapper"},Vt=c("div",{class:"ck-coin__fill",style:{height:"100%"}},null,-1),St={class:"ck-coin__title"};function Et(a,e,o,t,n,l){return p(),f("div",{class:W([`ck-coin_${o.coin.type}`,"ck-coin"]),draggable:"true",onDragstart:e[0]||(e[0]=(...r)=>l.onDragStart&&l.onDragStart(...r)),onDragend:e[1]||(e[1]=(...r)=>l.onDragEnd&&l.onDragEnd(...r))},[c("div",At,[Vt,c("div",{class:W([`ck-coin__icon_${o.coin.icon.toLowerCase()}`,"ck-coin__icon"])},null,2)]),c("div",St,U(o.coin.title),1)],34)}var O=V(It,[["render",Et]]);const Ht={name:"CoinsAccounts",components:{Coin:O},setup(){return{accounts:D(()=>h.readonly.accounts)}}},Mt={class:"coins-source"},Rt=c("h2",null,"\u041A\u043E\u0448\u0435\u043B\u044C\u043A\u0438",-1),Lt={class:"coins-container"};function zt(a,e,o,t,n,l){const r=v("Coin");return p(),f("div",Mt,[Rt,c("div",Lt,[(p(!0),f(_,null,S(t.accounts,(s,d)=>(p(),Y(r,{key:`inc-${d}`,coin:s},null,8,["coin"]))),128))])])}var $e=V(Ht,[["render",zt]]);const Ot={name:"Icon",props:{icon:{type:String,required:!0}}},Nt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},Ut=c("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"},null,-1),Tt=c("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"},null,-1),Bt=c("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"},null,-1),Ft=c("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"},null,-1),jt={key:2,"fill-rule":"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"},Yt={key:3,"fill-rule":"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"};function Pt(a,e,o,t,n,l){return p(),f("svg",Nt,[o.icon==="edit"?(p(),f(_,{key:0},[Ut,Tt],64)):$("",!0),o.icon==="remove"?(p(),f(_,{key:1},[Bt,Ft],64)):$("",!0),o.icon==="arrow-down"?(p(),f("path",jt)):$("",!0),o.icon==="arrow-up"?(p(),f("path",Yt)):$("",!0)])}var qt=V(Ot,[["render",Pt]]);const Kt={name:"HeapOfCoins",components:{Icon:qt,Coin:O},directives:{editor:{mounted(a){Pe(a.querySelector("a.show-editor"),{allowHTML:!0,content:a.querySelector("div"),hideOnClick:!0,interactive:!0,placement:"right-start",trigger:"click",onShown(e){e.popper.querySelector(".tippy-content input").focus()}})}}},props:{changeableColor:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},modelValue:{type:Object,default(){return{}}},movable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},renameable:{type:Boolean,default:!1},titleColor:{type:String,default:"black"}},emits:["update:modelValue","remove","moveUp","moveDown"],setup(a,{emit:e}){let o=h.dragging,t=h.palette,n=R(!1),l=D({get:()=>a.modelValue,set:g=>e("update:modelValue",g)}),r=D(()=>{var g,m;return((m=(g=a.modelValue)==null?void 0:g.color)==null?void 0:m.border)||t[0]}),s=D(()=>a.editable||a.renameable||a.removable||a.changeableColor);return{bgColor:r,palette:t,dragging:o,dragover:n,heap:l,showEditor:s,onDragEnter:()=>{n.value=!0},onDragLeave:()=>{n.value=!1},onDrop:g=>{g.preventDefault(),n.value=!1;let m=JSON.parse(g.dataTransfer.getData("text")),y=a.modelValue.coins.find(C=>C.id===m.id);(a.modelValue.type==="accounts"&&m.type==="account"||a.modelValue.type==="operations"&&["income","expense"].includes(m.type))&&!y&&a.modelValue.coins.push(m)},remove:g=>{let m=a.modelValue.coins.findIndex(y=>y.id===g);m!==-1&&a.modelValue.coins.splice(m,1)},setColor:g=>{a.modelValue.color.border=g}}}},Jt={key:0},Wt={key:1},Gt={key:2},Xt={key:3},Zt={key:4},Qt={key:0},ea={key:1,class:"palette-grid"},ta=["onClick"],aa={key:2,style:{"margin-top":"1rem","text-align":"right"}},oa=X(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0443\u0447\u0443 "),ra={class:"dropzone coins-container"};function na(a,e,o,t,n,l){const r=v("Icon"),s=v("Coin"),d=qe("editor");return p(),f("div",{class:"heap",style:J({borderColor:t.bgColor})},[c("div",{class:"heap-title",style:J({color:o.titleColor,backgroundColor:t.bgColor})},[c("h3",null,U(t.heap.title),1),o.movable?(p(),f("div",Jt,[c("a",{href:"#",onClick:e[0]||(e[0]=F(i=>a.$emit("moveUp"),["prevent"]))},[b(r,{icon:"arrow-up"})])])):(p(),f("div",Wt)),o.movable?(p(),f("div",Gt,[c("a",{href:"#",onClick:e[1]||(e[1]=F(i=>a.$emit("moveDown"),["prevent"]))},[b(r,{icon:"arrow-down"})])])):(p(),f("div",Xt)),t.showEditor?re((p(),f("div",Zt,[c("a",{href:"#",class:"show-editor",onClick:e[2]||(e[2]=F(()=>{},["prevent"]))},[b(r,{icon:"edit"})]),c("div",null,[o.editable||o.renameable?(p(),f("div",Qt,[re(c("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=i=>t.heap.title=i)},null,512),[[Ke,t.heap.title]])])):$("",!0),o.editable||o.changeableColor?(p(),f("div",ea,[(p(!0),f(_,null,S(t.palette,(i,u)=>(p(),f("div",{key:`c-${u}`,style:J({backgroundColor:i}),class:"palette-color",onClick:x=>t.setColor(i)},null,12,ta))),128))])):$("",!0),o.editable||o.removable?(p(),f("div",aa,[c("button",{onClick:e[4]||(e[4]=i=>a.$emit("remove"))},[b(r,{icon:"remove"}),oa])])):$("",!0)])])),[[d]]):$("",!0)],4),c("div",ra,[re(c("div",{class:W(["dz-cover",{dragover:t.dragover}]),onDragenter:e[5]||(e[5]=(...i)=>t.onDragEnter&&t.onDragEnter(...i)),onDragleave:e[6]||(e[6]=(...i)=>t.onDragLeave&&t.onDragLeave(...i)),onDragover:e[7]||(e[7]=i=>i.preventDefault()),onDrop:e[8]||(e[8]=(...i)=>t.onDrop&&t.onDrop(...i))},null,34),[[Je,t.dragging]]),(p(!0),f(_,null,S(t.heap.coins,i=>(p(),Y(s,{key:`money-acc-${i.id}`,coin:i,onClick:u=>t.remove(i.id)},null,8,["coin","onClick"]))),128))])],4)}var Z=V(Kt,[["render",na],["__scopeId","data-v-f9ace0e4"]]);const Ie="in",Ae="out",la="transfer",sa={"01":"\u044F\u043D\u0432","02":"\u0444\u0435\u0432","03":"\u043C\u0430\u0440\u0442","04":"\u0430\u043F\u0440","05":"\u043C\u0430\u0439","06":"\u0438\u044E\u043D\u044C","07":"\u0438\u044E\u043B\u044C","08":"\u0430\u0432\u0433","09":"\u0441\u0435\u043D","10":"\u043E\u043A\u0442","11":"\u043D\u043E\u044F","12":"\u0434\u0435\u043A"},Ve=(a,e=2)=>a.toString().padStart(e,"0"),ie=(a,e=!1)=>{let o=a.getFullYear();return e?o:o.toString()},ce=(a,e=!1)=>{let o=a.getMonth()+1;return e?o:Ve(o)},de=a=>`${ie(a)}-${ce(a)}`,P=(a,e)=>{let o=[],t=ie(a,!0),n=ce(a,!0),l=ie(e,!0),r=ce(e,!0);for(let s=t;s<=l;s++){let d=s===t?n:1,i=s===l?r:12;for(let u=d;u<=i;u++)o.push(`${s}-${Ve(u)}`)}return o},Q=(a,e=sa)=>a.map((o,t)=>{let[n,l]=o.split("-");return l==="01"||t===0?`${e[l]}
${n}`:e[l]}),G=(a,e)=>{let o={};for(let t of e)if(a.includes(t.source)||a.includes(t.destination)){let n=de(t.date.date);typeof o[n]=="undefined"&&(o[n]=0),t.direction===Ie&&(o[n]+=t.value),t.direction===Ae&&(o[n]-=t.value)}return o},ke=(a,e)=>{let o=a.value,t=P(e[0].date.date,e[e.length-1].date.date),n=t.length,l="";for(let r=e.length-1;r>=0;r--){let s=e[r];if(de(s.date.date)!==l)for(;n>0&&de(s.date.date)!==l;)n--,l=t[n],t[n]=[t[n],o];if(s.source===a.title&&(o+=s.currency===a.currency?s.value:s.value2),s.destination===a.title&&(o-=s.currency===a.currency?s.value:s.value2),Number.isNaN(o)){console.error("accountHistoryByMonths: value is NaN",{op:s,account:a}),console.log(s);break}}return Object.fromEntries(t)},ia={name:"AnalyzeAccounts",components:{ChartPie:$t,Coin:O,CoinsAccounts:$e,HeapOfCoins:Z,BarChart:we},setup(){var g;let a=D(()=>h.state.heaps.accounts),e=D(()=>a.value.map(m=>({title:m.title,color:m.color.border,value:m.coins.reduce((y,w)=>{let C=w.currency===h.state.baseCurrency?1:j.rate(w.currency);return y+=w.value/C,y},0)}))),o={responsive:!0,aspectRatio:3,layout:{padding:{right:20}},elements:{bar:{}},scales:{x:{id:"x-axis",type:"category",grid:{borderDash:[1,3],color:"rgba(128,128,128,0.4)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)",tickLength:5},ticks:{maxRotation:0,padding:5,autoSkip:!1}},y:{stacked:!0,type:"linear",min:0,grid:{borderDash:[1,2],color:"rgba(128,128,128,0.2)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)"},ticks:{callback(m){return A(m)}},afterFit(m){m.width=50}}}},t=P(h.readonly.operations[0].date.date,h.readonly.operations[h.readonly.operations.length-1].date.date),n={};for(let m of a.value)for(let y of m.coins){let w=ke(y,h.readonly.operations);if(y.currency!==h.state.baseCurrency)for(let[C,H]of Object.entries(w)){let k=j.rate(y.currency,C);w[C]=Math.round(H/k)}for(let[C,H]of Object.entries(w))(g=n[C])!=null||(n[C]=0),n[C]+=H}console.log({totals:n});let l=t.map(()=>null),r=t.map(m=>n[m]),s=D(()=>({xLabels:Q(t),datasets:a.value.map(m=>{var C,H;let y=m.coins.map(k=>{let I=ke(k,h.readonly.operations);if(k.currency!==h.state.baseCurrency)for(let[N,ee]of Object.entries(I)){let te=j.rate(k.currency,N);I[N]=Math.round(ee/te)}return I}),w=11;return{label:m.title,data:t.map(k=>y.reduce((I,N)=>(I+=N[k],I),0)),grouped:!1,borderColor:m.color.border,backgroundColor:T((C=m.color)==null?void 0:C.border,.3),datalabels:{display(k){let I=k.chart.scales.y.max/k.chart.scales.y.maxHeight*(w+4);return k.dataset.data[k.dataIndex]>I},color:(H=m.color)==null?void 0:H.border,anchor:"center",labels:{value:{align:"end",offset:-5,font:{size:w,weight:"bold"},formatter(k,I){return A(k)}},percent:{align:"start",offset:-4,font:{size:9,weight:"normal"},formatter(k,I){return`${Math.round(100*k/r[I.dataIndex])}%`}}}}}}).concat([{label:"",data:l,grouped:!1,skipNulls:!0,borderColor:"transparent",backgroundColor:"transparent",datalabels:{display:!0,color:"#777",backgroundColor:"transparent",borderRadius:3,padding:{top:1,bottom:0,left:3,right:3},anchor:"end",align:"end",offset(m){return m.chart.chartArea.height-15},font:{size:10,weight:"bold"},formatter(m,y){return A(r[y.dataIndex])}}}])})),d=R();return{heapsAccount:a,pieChartData:e,chartRef:d,chartOptions:o,chartData:s,addHeap:()=>{h.state.heaps.accounts.push({type:"accounts",title:"\u041A\u0443\u0447\u0430",color:{},coins:[]})},moveHeapUp:m=>{if(m>0){let[y]=h.state.heaps.accounts.splice(m,1);h.state.heaps.accounts.splice(m-1,0,se(y))}},moveHeapDown:m=>{if(m<h.state.heaps.accounts.length-1){let[y]=h.state.heaps.accounts.splice(m,1);h.state.heaps.accounts.splice(m+1,0,se(y))}},removeHeap:m=>{h.state.heaps.accounts.splice(m,1)}}}},ca=c("h2",null,"\u0410\u043D\u0430\u043B\u0438\u0437 \u043D\u0430\u043B\u0438\u0447\u043D\u043E\u0441\u0442\u0438",-1),da={class:"analyze"};function ua(a,e,o,t,n,l){const r=v("HeapOfCoins"),s=v("BarChart"),d=v("ChartPie");return p(),f(_,null,[ca,c("div",da,[c("div",null,[(p(!0),f(_,null,S(t.heapsAccount,(i,u)=>(p(),f("div",{key:`h-ex-${u}`},[b(r,{modelValue:t.heapsAccount[u],"onUpdate:modelValue":x=>t.heapsAccount[u]=x,editable:"",movable:"",onMoveUp:x=>t.moveHeapUp(u),onMoveDown:x=>t.moveHeapDown(u),onRemove:x=>t.removeHeap(u)},null,8,["modelValue","onUpdate:modelValue","onMoveUp","onMoveDown","onRemove"])]))),128)),c("button",{onClick:e[0]||(e[0]=(...i)=>t.addHeap&&t.addHeap(...i))}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0443\u0447\u0443 ")]),c("div",null,[b(s,{ref:"chartRef","chart-data":t.chartData,options:t.chartOptions},null,8,["chart-data","options"]),b(d,{data:t.pieChartData},null,8,["data"])])])],64)}var pa=V(ia,[["render",ua]]);const fe=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.6)",ha={name:"AnalyzeExpenses",components:{HeapOfCoins:Z,Coin:O,LineChart:he},setup(){let a=D(()=>h.state.heaps.expenses),e={responsive:!0,aspectRatio:3,layout:{padding:{right:20}},elements:{line:{tension:.2,fill:!0}},scales:{x:{id:"x-axis",type:"category",grid:{borderDash:[1,3],color:"rgba(128,128,128,0.4)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)",tickLength:5},ticks:{maxRotation:0,padding:5,autoSkip:!1}},y:{type:"linear",min:0,grid:{borderDash:[1,2],color:"rgba(128,128,128,0.2)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)"},ticks:{callback(s){return A(s)}},afterFit(s){s.width=50}}}},o=P(h.readonly.operations[0].date.date,h.readonly.operations[h.readonly.operations.length-1].date.date),t=D(()=>({xLabels:Q(o),datasets:a.value.map(s=>{let d=s.coins.map(u=>u.title),i=G(d,h.readonly.operations);return{label:s.title,data:o.map(u=>Math.abs(i[u])),borderColor:s.color.border,backgroundColor:T(s.color.border,.2),datalabels:{display:"auto",color:s.color.border,backgroundColor:fe(),borderRadius:3,padding:{top:1,bottom:0,left:3,right:3},align:"end",font:{size:11,weight:"bold"},formatter(u){return A(u)}}}})}));return{chartRef:R(),heapsExpenses:a,chartOptions:e,chartData:t,addHeap:()=>{h.state.heaps.expenses.push({type:"operations",title:"\u041A\u0443\u0447\u0430",color:{},coins:[]})},removeHeap:s=>{h.state.heaps.expenses.splice(s,1)}}}},fa=c("h2",null,"\u0410\u043D\u0430\u043B\u0438\u0437 \u0440\u0430\u0441\u0445\u043E\u0434\u043E\u0432",-1),ma={class:"analyze"};function ga(a,e,o,t,n,l){const r=v("HeapOfCoins"),s=v("LineChart");return p(),f(_,null,[fa,c("div",ma,[c("div",null,[(p(!0),f(_,null,S(t.heapsExpenses,(d,i)=>(p(),f("div",{key:`h-ex-${i}`},[b(r,{modelValue:t.heapsExpenses[i],"onUpdate:modelValue":u=>t.heapsExpenses[i]=u,editable:"",onRemove:u=>t.removeHeap(i)},null,8,["modelValue","onUpdate:modelValue","onRemove"])]))),128)),c("button",{onClick:e[0]||(e[0]=(...d)=>t.addHeap&&t.addHeap(...d))}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0443\u0447\u0443 ")]),b(s,{ref:"chartRef","chart-data":t.chartData,options:t.chartOptions},null,8,["chart-data","options"])])],64)}var ya=V(ha,[["render",ga]]);const _a={name:"AnalyzeIncomes",components:{HeapOfCoins:Z,Coin:O,LineChart:he},setup(){let a=D(()=>h.state.heaps.incomes),e={responsive:!0,aspectRatio:3,layout:{padding:{right:20}},elements:{line:{tension:.2,fill:!0}},scales:{x:{id:"x-axis",type:"category",grid:{borderDash:[1,3],color:"rgba(128,128,128,0.4)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)",tickLength:5},ticks:{maxRotation:0,padding:5,autoSkip:!1}},y:{type:"linear",grid:{borderDash:[1,2],color:"rgba(128,128,128,0.2)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)"},ticks:{callback(s){return A(s)}},afterFit(s){s.width=50}}}},o=P(h.readonly.operations[0].date.date,h.readonly.operations[h.readonly.operations.length-1].date.date),t=D(()=>({xLabels:Q(o),datasets:a.value.map(s=>{let d=s.coins.map(u=>u.title),i=G(d,h.readonly.operations);return{label:s.title,data:o.map(u=>i[u]),borderColor:s.color.border,backgroundColor:T(s.color.border,.2),datalabels:{display:"auto",color:s.color.border,backgroundColor:fe(),borderRadius:3,padding:{top:1,bottom:0,left:3,right:3},align:"end",font:{size:11,weight:"bold"},formatter(u){return A(u)}}}})}));return{chartRef:R(),heapsIncomes:a,chartOptions:e,chartData:t,addHeap:()=>{h.state.heaps.incomes.push({type:"operations",title:"\u041A\u0443\u0447\u0430",color:{},coins:[]})},removeHeap:s=>{console.log("removeHeap",s),h.state.heaps.incomes.splice(s,1)}}}},va=c("h2",null,"\u0410\u043D\u0430\u043B\u0438\u0437 \u0434\u043E\u0445\u043E\u0434\u043E\u0432",-1),ba={class:"analyze"};function Ca(a,e,o,t,n,l){const r=v("HeapOfCoins"),s=v("LineChart");return p(),f(_,null,[va,c("div",ba,[c("div",null,[(p(!0),f(_,null,S(t.heapsIncomes,(d,i)=>(p(),f("div",{key:`h-in-${i}`},[b(r,{modelValue:t.heapsIncomes[i],"onUpdate:modelValue":u=>t.heapsIncomes[i]=u,editable:"",onRemove:u=>t.removeHeap(i)},null,8,["modelValue","onUpdate:modelValue","onRemove"])]))),128)),c("button",{onClick:e[0]||(e[0]=(...d)=>t.addHeap&&t.addHeap(...d))}," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0443\u0447\u0443 ")]),b(s,{ref:"chartRef","chart-data":t.chartData,options:t.chartOptions},null,8,["chart-data","options"])])],64)}var ka=V(_a,[["render",Ca]]);const Da=(a,e)=>{let o=e.value.map(r=>{let s=r.coins.map(i=>i.title),d=G(s,h.readonly.operations);return{yAxisID:"yIE",label:r.title,data:a.map(i=>Math.abs(d[i])),borderColor:r.color.border,backgroundColor:T(r.color.border,.2),datalabels:{display:"auto",color:r.color.border,backgroundColor:fe(),borderRadius:3,padding:{top:1,bottom:0,left:3,right:3},align:"end",font:{size:11,weight:"bold"},formatter(i){return A(i)}}}}),t=[...h.readonly.incomes.map(r=>r.title),...h.readonly.expenses.map(r=>r.title)],n=G(t,h.readonly.operations);console.log({balanceData:n});let l=[{type:"bar",yAxisID:"yBalance",label:"\u0414\u043E\u0445\u043E\u0434",data:a.map(r=>n[r]>=0?n[r]:0),grouped:!1,borderColor:"#34c759",backgroundColor:T("#34c759",.2),datalabels:{display(r){return r.dataset.data[r.dataIndex]!==0},color:"#34c759",borderRadius:3,padding:{top:1,bottom:0,left:3,right:3},anchor:"start",align:"start",font:{size:11,weight:"bold"},formatter(r){return A(r)}}},{type:"bar",yAxisID:"yBalance",label:"\u0423\u0431\u044B\u0442\u043E\u043A",data:a.map(r=>n[r]<0?n[r]:0),grouped:!1,borderColor:"#ff3b30",backgroundColor:T("#ff3b30",.2),datalabels:{display(r){return r.dataset.data[r.dataIndex]!==0},color:"#ff3b30",borderRadius:3,padding:{top:1,bottom:0,left:3,right:3},anchor:"end",align:"end",font:{size:11,weight:"bold"},formatter(r){return A(r)}}}];return D(()=>({xLabels:Q(a),datasets:[...o,...l]}))},xa={name:"AnalyzeIncomesVsExpenses",components:{HeapOfCoins:Z,Coin:O,LineChart:he,BarChart:we},setup(){let a=D(()=>h.state.heaps.allIncomesVsExpenses),e={responsive:!0,aspectRatio:2,layout:{padding:{right:20}},elements:{line:{tension:.2,fill:!0}},scales:{x:{id:"x-axis",type:"category",grid:{borderDash:[1,3],color:"rgba(128,128,128,0.4)",borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)",tickLength:5},ticks:{maxRotation:0,padding:5,autoSkip:!1}},yBalance:{type:"linear",stacked:"single",position:"left",stack:"incomes-vs-expenses",stackWeight:1,grid:{color(l){return l.tick.value===0?"rgba(128,128,128,0.5)":"rgba(128,128,128,0.1)"},borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)"},ticks:{callback(l){return A(l)}},afterFit(l){l.width=50}},yIE:{type:"linear",position:"left",stack:"incomes-vs-expenses",stackWeight:3,min:0,grid:{color(l){return l.tick.value===0?"rgba(128,128,128,0.5)":"rgba(128,128,128,0.1)"},borderColor:"rgba(128,128,128,0.5)",tickColor:"rgba(128,128,128,0.5)"},ticks:{callback(l){return A(l)}},afterFit(l){l.width=50}}}},o=P(h.readonly.operations[0].date.date,h.readonly.operations[h.readonly.operations.length-1].date.date);console.log({monthAxis:o});let t=Da(o,a);return console.log("income vs expenses chartData",t),{chartRef:R(),heaps:a,chartOptions:e,chartData:t}}},wa=c("h2",null,"\u0410\u043D\u0430\u043B\u0438\u0437 \u0434\u043E\u0445\u043E\u0434\u043E\u0432 \u0438 \u0440\u0430\u0441\u0445\u043E\u0434\u043E\u0432",-1),$a={class:"analyze"};function Ia(a,e,o,t,n,l){const r=v("HeapOfCoins"),s=v("LineChart");return p(),f(_,null,[wa,c("div",$a,[c("div",null,[(p(!0),f(_,null,S(t.heaps,(d,i)=>(p(),f("div",{key:`h-in-ex-${i}`},[b(r,{modelValue:t.heaps[i],"onUpdate:modelValue":u=>t.heaps[i]=u,"changeable-color":""},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),c("div",null,[b(s,{ref:"chartRef","chart-data":t.chartData,options:t.chartOptions},null,8,["chart-data","options"])])])],64)}var Aa=V(xa,[["render",Ia]]);const Va={name:"CoinsOperations",components:{Coin:O},setup(){let a=D(()=>h.readonly.incomes),e=D(()=>h.readonly.expenses);return{incomes:a,expenses:e}}},Sa={class:"coins-source"},Ea=c("h2",null,"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u0438",-1),Ha={class:"coins-container"},Ma={class:"coins-container"};function Ra(a,e,o,t,n,l){const r=v("Coin");return p(),f("div",Sa,[Ea,c("div",Ha,[(p(!0),f(_,null,S(t.incomes,(s,d)=>(p(),Y(r,{key:`inc-${d}`,coin:s},null,8,["coin"]))),128))]),c("div",Ma,[(p(!0),f(_,null,S(t.expenses,(s,d)=>(p(),Y(r,{key:`inc-${d}`,coin:s},null,8,["coin"]))),128))])])}var La=V(Va,[["render",Ra]]);const za=new We;let De;const ue=a=>Array.from(a.matchAll(/"([^"]*)"/g),e=>e[1]),pe=a=>Number(a.replace(",",".")),Oa=a=>{if(!a)return null;let e,o,t;return/^\d+\.\d+\.\d+$/.test(a)?[o,e,t]=a.split("."):[e,o,t]=a.split("/"),{year:Number(t),month:Number(e)-1,day:Number(o),date:new Date(Number(t),Number(e)-1,Number(o),3)}},Na=a=>za.transform(a,"_").toLowerCase(),Ua={\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435:{name:"title",number:!1},\u0411\u044E\u0434\u0436\u0435\u0442:{name:"budget",number:!0},\u041F\u043E\u043B\u0443\u0447\u0435\u043D\u043E:{name:"total",number:!0},\u0418\u043A\u043E\u043D\u043A\u0430:{name:"icon",number:!1},\u0412\u0430\u043B\u044E\u0442\u0430:{name:"currency",number:!1},"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435":{name:"value",number:!0}},K=(a,e,o)=>{let t=ue(a.shift()).map(l=>Ua[l]),n=[];for(let l of a){let r={type:o};for(let[s,d]of ue(l).entries())r[t[s].name]=t[s].number?pe(d):d;r.id=Na(r.title),n.push(r)}return n},Ta=a=>{var m;De=a;let[e,o,t,n,l]=De.split(`


`);e=e.split(`
`);let r=(m=e==null?void 0:e.shift())==null?void 0:m.split("=")[1];if(!r)return console.error("Separator of values not found"),!1;let s;o&&(o=o.split(`
`),s=K(o,r,"income"));let d;t&&(t=t.split(`
`),d=K(t,r,"account"));let i;n&&(n=n.split(`
`),i=K(n,r,"expense"));let u;l&&(l=l.split(`
`),u=K(l,r,"tag"));const x=(y,w)=>y==="\u0420\u0430\u0441\u0445\u043E\u0434"?Ae:(s==null?void 0:s.find(C=>C.title===w))?Ie:la;e.shift();let E=[],g="";for(let y of e){if(!y)break;if(g+=y,g[g.length-1]!=='"'){g+=" ";continue}let[w,C,H,k,I,N,ee,te,Ee,no,He]=ue(g);E.push({date:Oa(w),direction:x(C,H),source:H,destination:k,value:pe(N),value2:pe(te),currency:ee,currency2:Ee,tags:I,comment:He}),g=""}return{incomes:s,accounts:d,expenses:i,tags:u,operations:E}};const xe=1024**2,Ba={name:"UploadFile",data(){return{dragover:!1}},emits:["import"],setup(){},methods:{onDrop(a){this.dragover=!1;let e=a.dataTransfer?a.dataTransfer.files[0]:a.target.files[0];if(e.type!=="text/csv"){alert("\u0413\u043E\u0434\u044F\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E CSV-\u0444\u0430\u0439\u043B\u044B");return}if(e.size>xe){alert(`\u0424\u0430\u0439\u043B \u0432\u0435\u043B\u0438\u043A\u043E\u0432\u0430\u0442 \u2014 ${e.size} \u0431\u0430\u0439\u0442,
\u0430 \u043C\u043E\u0436\u043D\u043E \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C ${xe} \u0431\u0430\u0439\u0442`);return}let o=new FileReader;o.onload=()=>{try{let t=Ta(o.result);this.$emit("import",{timestamp:e.lastModified,data:t})}catch(t){alert(`\u041A\u0430\u043A\u0430\u044F-\u0442\u043E \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u043C\u043F\u043E\u0440\u0442\u0435 \u0434\u0430\u043D\u043D\u044B\u0445.
\u041D\u0430\u0434\u043E \u043A\u043E\u043F\u0430\u0442\u044C\u0441\u044F \u0432 \u043A\u043E\u043D\u0441\u043E\u043B\u0438 \u0438 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044C\u0441\u044F.
csv.loadData failed`),console.log("csv.loadData failed",{error:t})}},o.readAsText(e)},openChooseFile(){this.$refs.fileInput.click()}}},Se=a=>(Ge("data-v-cea97724"),a=a(),Xe(),a),Fa=Se(()=>c("p",null,[X(" \u0418\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u044F \u043F\u043E \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0443 \u0434\u0430\u043D\u043D\u044B\u0445: "),c("a",{href:"https://ruhelp.coinkeeper.me/4e4288b6e3ad4b349aab0e7b55d12d99",target:"_blank"}," ruhelp.coinkeeper.me/4e4288b6e3ad4b349aab0e7b55d12d99 ")],-1)),ja=Se(()=>c("p",null,"\u0421\u044E\u0434\u0430 \u043D\u0430\u0434\u043E \u0431\u0440\u043E\u0441\u0438\u0442\u044C csv-\u0444\u0430\u0439\u043B, \u044D\u0441\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0438\u0437 CoinKeeper'\u0430.",-1));function Ya(a,e,o,t,n,l){return p(),f(_,null,[Fa,c("div",{class:W(["dropzone",{dragover:n.dragover}]),onDragover:e[1]||(e[1]=F(r=>n.dragover=!0,["prevent"])),onDragleave:e[2]||(e[2]=r=>n.dragover=!1),onDrop:e[3]||(e[3]=F((...r)=>l.onDrop&&l.onDrop(...r),["stop","prevent"])),onClick:e[4]||(e[4]=(...r)=>l.openChooseFile&&l.openChooseFile(...r))},[ja,c("input",{ref:"fileInput",name:"csv",type:"file",onChange:e[0]||(e[0]=(...r)=>l.onDrop&&l.onDrop(...r))},null,544)],34)],64)}var Pa=V(Ba,[["render",Ya],["__scopeId","data-v-cea97724"]]);const qa={id:"labels-split",beforeInit(a){var e;(e=a.data.xLabels)==null||e.forEach((o,t,n)=>{/\n/.test(o)&&(n[t]=o.split(/\n/))})}};Ze.register(Qe,et,tt,at,ot,rt,nt,lt,st,it,ct,qa);const Ka={name:"App",components:{AnalyzeAccounts:pa,AnalyzeExpenses:ya,AnalyzeIncomes:ka,AnalyzeIncomesVsExpenses:Aa,CoinsAccounts:$e,CoinsOperations:La,UploadFile:Pa},setup(){let a=R(!1),e=D(()=>h.readonly.timestamp?ut(new Date(h.readonly.timestamp),{addSuffix:!0,locale:pt}):""),o=R(!1);return dt(async()=>{await h.init(),await j.init("RUB",["USD","EUR"]),o.value=j.loaded,a.value=!0}),{appInitialized:a,dataExportedAgo:e,currenciesLoaded:o,hasData:h.hasData}},methods:{async clearData(){await h.clearReadonly()},reset(){return confirm(`\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u044E \u0438\u043D\u0444\u0443 \u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438?
\u0411\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u044B \u0432\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435, \u043A\u0443\u0447\u0438 \u0438 \u0438\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0446\u0432\u0435\u0442\u0430, \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F \u043F\u0440\u043E\u0447\u0435\u0435.`)},async onDataImport(a){console.log(a);try{await h.setReadonly(a)}catch(e){alert(`\u041A\u0430\u043A\u0430\u044F-\u0442\u043E \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u043C\u043F\u043E\u0440\u0442\u0435 \u0434\u0430\u043D\u043D\u044B\u0445.
\u041D\u0430\u0434\u043E \u043A\u043E\u043F\u0430\u0442\u044C\u0441\u044F \u0432 \u043A\u043E\u043D\u0441\u043E\u043B\u0438 \u0438 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044C\u0441\u044F.
store.setReadonly failed`),console.log("store.setReadonly failed",{error:e})}}}},Ja={key:0},Wa=c("h1",null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0438\u0437 Coin Keeper",-1),Ga=X(" \xA0 "),Xa={class:"section"},Za=c("hr",null,null,-1),Qa=c("hr",null,null,-1),eo=c("hr",null,null,-1),to={class:"section"},ao=c("footer",null,[c("p",null," \u0412\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0445\u0440\u0430\u043D\u044F\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0438 \u043D\u0438\u043A\u0443\u0434\u0430 \u043D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u044E\u0442\u0441\u044F. \u0421\u0430\u0439\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044F \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0438 \u0431\u043E\u043B\u044C\u0448\u0435 \u0441 \u043D\u0438\u043C \u043D\u0435 \u0432\u0437\u0430\u0438\u043C\u043E\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442. ")],-1);function oo(a,e,o,t,n,l){const r=v("UploadFile"),s=v("CoinsOperations"),d=v("AnalyzeIncomesVsExpenses"),i=v("AnalyzeIncomes"),u=v("AnalyzeExpenses"),x=v("CoinsAccounts"),E=v("AnalyzeAccounts");return p(),f(_,null,[c("header",null,[c("div",null,[t.hasData?(p(),f("div",Ja," \u0414\u0430\u043D\u043D\u044B\u0435 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B "+U(t.dataExportedAgo),1)):$("",!0)]),Wa,c("div",null,[t.hasData?(p(),f("button",{key:0,onClick:e[0]||(e[0]=(...g)=>l.clearData&&l.clearData(...g))}," \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u0430\u043D\u043D\u044B\u0435 ")):$("",!0),Ga,t.hasData?(p(),f("button",{key:1,onClick:e[1]||(e[1]=(...g)=>l.reset&&l.reset(...g))}," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0451 ")):$("",!0)])]),c("main",null,[t.appInitialized?(p(),f(_,{key:0},[t.hasData?$("",!0):(p(),Y(r,{key:0,onImport:l.onDataImport},null,8,["onImport"])),t.hasData?(p(),f(_,{key:1},[c("div",Xa,[b(s),c("div",null,[b(d),Za,b(i),Qa,b(u)])]),eo,c("div",to,[b(x),c("div",null,[b(E)])])],64)):$("",!0)],64)):$("",!0)]),ao],64)}var ro=V(Ka,[["render",oo]]);ht(ro).mount("#app");
